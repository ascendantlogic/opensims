<?xml version="1.0" encoding="UTF-8"?>

<document>
<properties>
<title>File Layout</title>
<author
 email="paco@symbiot.com"
>Paco NATHAN</author>
</properties>

<body>

<section
 name="Home Directory"
>
<p>

This is the directory created from the downloaded archive.

Edit the <code>build.properties</code> prior to running the <i>Ant</i>
installer script.

After installation, USE the tools in this directory to update or
modify the code and configurations.

</p>
<p>
<code>
<pre>

opensims					(release distribution - OpenSIMS home directory)
  |
  +- README					(you're soaking in it)
  |
  +- LICENSE					(OpenSIMS/AgentSDK/Ceteri license agreement)
  |
  +- build					(properties files, build targets)
      |
      +- build.properties			(OpenSIMS customized system properties)
      |
      +- default.properties			(OpenSIMS default system properties)
      |
      +- ifconf.properties			(selected network properties)
      |
      +- keymgr.properties			(SSL cert distinguishing name properties)
      |
      +- log4j.properties			(OpenSIMS logging properties)
      |
      +- torque.properties			(Torque schema generator/runtime properties)
      |
      +- release.properties			(OpenSIMS build/version information)
      |
      +- properties.xml				(shared properties for Ant build scripts)
      |
      +- opensims.war				(OpenSIMS compile/build target - WAR file)
  |
  +- build.xml					(OpenSIMS/AgentSDK system build script)
  |
  +- agent					(reuse for installing AgentSDK on remote hosts)
      |
      +- sdk.xml				(XML definitions for recursive build script)
      |
      +- agents					(source code for Agents and Plugins)
      |
      +- library				(source code for "libsymbiot" library)
  |
  +- docs					(static web content)
      |
      +- images					(images used in the webapp reporting and Flash GUI)
      |
      +- javadoc				(JavaDoc for the OpenSIMS webapp Java API)
      |
      +- manual					(OpenSIMS manual XML source and Velocity/Anakia scripts)
      |
      +- pdf					(PDF versions of developer notes)
      |
      +- qa					(reports generated by unit metrics)
      |
      +- torque					(Torque-generated schema docs for OpenSIMS database)
  |
  +- flash					(Flash GUI source code and config files - for dev only)
  |
  +- java
      |
      +- classpath.xml				(shared Java classpath for third-party dependencies)
      |
      +- lib					(third-party Java libraries)
      |
      +- org
          |
          +- opensims				(OpenSIMS webapp Java API source code - for dev only)
  |
  +- tools					(tools to integrate third-party components)
      |
      +- depend					("preflight" dependencies checking)
      |
      +- geoip					(MaxMind GeoIP integration)
      |
      +- ifconf					(detect network interface configuration)
      |
      +- keymgr					(SSL key management)
      |
      +- lingo					(language translation)
      |
      +- nagios					(Nagios integration)
      |
      +- report					(report development test rig)
      |
      +- snort					(Snort integration)
      |
      +- torque					(Torque scripts to generate XML/SQL/Java db access)
         |
         +- database				(vendor-specific database properties)
         |
         +- lib					(location for shared JAR files)
         |
         +- schema				(XML schema definitions used by Torque)
            |
            +- opensims-schema.xml		(XML schema definition for OpenSIMS database)
            |
            +- opensims-data.dtd		(XML schema DTD for database dump/backup in XML)
         |
         +- src					(SQL files generated by Torque)
            |
            +- opensims-schema.sql		(SQL database schema)
            |
            +- opensims-opensims-all-data.xml	(SQL database dump/backup in XML)
      |
      +- update					(Ceteri repository updater)
  |
  +- webapp					(build scripts for OpenSIMS webapp and Flash GUI)

</pre>
</code>
</p>
</section>

<section
 name="Server Configuration"
>
<p>

This is the system-wide runtime configuration, created during the installation.

Note that the SSL certs are sym-linked, to follow the general case of
what the <i>AgentSDK</i> expects to find at runtime, since it may or
may not always be on the same server as the <i>OpenSIMS</i> webapp.

</p>
<p>
<code>
<pre>

/etc
  |
  +- opensims					(OpenSIMS/AgentSDK config files)
      |
      +- webapp.xml				(OpenSIMS webapp config - edit it to set runtime properties)
      |
      +- symagent.xml				(AgentSDK local agent config)
      |
      +- certs					(AgentSDK links to SSL certs)

</pre>
</code>
</p>
</section>

<section
 name="Application Server"
>
<p>

These are the files used directly by the application server, which is
<i>Tomcat</i> for the reference implementation.

Edit the XML files to change the configuration of specific features in
the webapp and GUI.

</p>
<p>
<code>
<pre>

$CATALINA_HOME					(Tomcat home directory)
  |
  +- conf
      |
      +- server.xml				(modify to add the special OpenSIMS webapp <Context/>)
  |
  +- common
      |
      +- lib					(location for shared JAR files)
  |
  +- webapps
      |
      +- opensims				(root dir for OpenSIMS webapp and Flash GUI)
          |
          +- uml				(OpenSIMS UML finite state machine definitions)
          |
          +- xsl				(OpenSIMS XSLT templates for menus, config, etc.)

</pre>
</code>
</p>
</section>

<section
 name="Libraries, Keys, Logs"
>
<p>

These are the library files and log files used by <i>OpenSIMS</i> and
<i>AgentSDK</i>, essentially that data which is not kept in the
database.

</p>
<p>
<code>
<pre>

/var
  |
  +- lib
      |
      +- opensims				(OpenSIMS library files, XML data sources)
          |
          +- ${NETWORK}.model.xml		(XML representation of network model, from autodiscovery)
          |
          +- ifconfig.xml			(XML representation of network interface configuration)
          |
          +- ${FQDN}.req.pem			(OpenSIMS cert signing request sent to the Ceteri repository)
          |
          +- ${FQDN}.signed.pem			(OpenSIMS signed cert retured from the Ceteri repository)
          |
          +- alert_defs.xml			(OpenSIMS alert definitions - top-level overlay)
          |
          +- alert_types_template.xml		(OpenSIMS alert types / IDS rule patterns)
          |
          +- snort_alert_defs.xml		(OpenSIMS alert definitions derived from Snort rules)
          |
          +- world.xml				(optional XML file that fixes ISO 3166 country code info)
  |
  +- ssl					(SSL keys/certs)
      |
      +- truststore.jks				(Java SSL truststore)
      |
      +- keystore.jks				(Java SSL keystore)
      |
      +- symbiotnetcacert.pem			(Ceteri repository RootCA public cert)
      |
      +- cacert.pem				(local RootCA public cert)
      |
      +- private
          |
          +- cakey.pem				(local RootCA private key)
      |
      +- certs
          |
          +- ${FQDN}.pem			(local application server cert)
  |
  +- log
      |
      +- opensims				(OpenSIMS log files)
          |
          +- symagent_error_log.txt		(AgentSDK runtime error log)
          |
          +- symagent_message_log.txt		(AgentSDK runtime debug log)
          |
          +- webapp_message_log.txt		(OpenSIMS runtime debug log)

</pre>
</code>
</p>
</section>

</body>
</document>
